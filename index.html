<!doctype html>
<meta charset="utf8">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css">
<style>
html, body, #map { height: 100%; margin: 0; }
#map { margin-right: 200px; }
#menu { float: right; height: 100%; width: 200px; }
#text { position: absolute; bottom: 0; left: 0;
  height: 30%; width: 30%; overflow-y: auto;
  z-index: 2000; background: white;
  border: 1px solid black; }
</style>

<script src="https://unpkg.com/topojson@3.0.2"></script>
<script src="https://unpkg.com/cross-fetch"></script>
<script src="https://unpkg.com/leaflet@1.3.1"></script>
<script src="https://unpkg.com/jquery@3.3.1"></script>
<script src="https://unpkg.com/js-yaml@3.10.0/dist/js-yaml.min.js"></script>

<div id="menu"></div>
<div id="map"></div>
<div id="text"></div>

<script>
var map = L.map('map').setView([46, 25], 7);

L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

fetch('vectori.topojson')
.then(function(resp) { return resp.json() })
.then(function(topo) {
  var bataliiData = topojson.feature(topo, topo.objects.batalii);
  var graniteData = topojson.feature(topo, topo.objects.granite);

  L.geoJSON(bataliiData).addTo(map);
  L.geoJSON(graniteData).addTo(map);
});

fetch('content.yaml')
.then(function(resp) { return resp.text() })
.then(function(body) {
  var content = jsyaml.load(body);

  var menu = $('#menu');
  $('<h2>').text("România Mare").appendTo('#menu');
  $('<h2>').text("Domnitori").appendTo('#menu');
  content['domnitori'].forEach(function(record) {
    var link = $('<a href="#">').text(record.nume)
    $('<p>').append(link).appendTo('#menu');
    link.on('click', function() {
      $('#text').text(record.text);
    });
  });
  $('<h2>').text("Năvălirea Barbarilor").appendTo('#menu');
  content['migratii'].forEach(function(record) {
    var link = $('<a href="#">').text(record.nume)
    $('<p>').append(link).appendTo('#menu');
    link.on('click', function() {
      $('#text').text(record.text);
    });
  });
  $('<h2>').text("Dacia Romană").appendTo('#menu');
});
</script>
